<div class="map-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Mapa de España</mat-card-title>
      <mat-card-subtitle>
        <div class="coords-display">
         <!--  Longitud: {{currentLngLat.lng | number: '1.6-6'}}, Latitud: {{currentLngLat.lat | number: '1.6-6'}} -->
        </div>
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>

      <div #map class="map-container map-display"></div>

      <div class="location-info mt-3" *ngIf="selectedCommunity">
        <mat-chip-listbox>
          <mat-chip *ngIf="selectedCommunity" color="primary" selected>
            {{selectedCommunity}}
          </mat-chip>
          <mat-chip *ngIf="selectedProvince" color="accent" selected>
            {{selectedProvince}}
          </mat-chip>
          <mat-chip *ngIf="selectedTown" color="warn" selected>
            {{selectedTown}}
          </mat-chip>
        </mat-chip-listbox>
      </div>

    </mat-card-content>

    <mat-card-actions>
      <div class="d-flex justify-content-between align-items-center w-100">
        <div>
          <button mat-raised-button color="primary" (click)="flyToCurrentMarker()">
            <mat-icon>my_location</mat-icon> Centrar mapa
          </button>
        </div>
        <div class="weather-button">
          <button *ngIf="selectedTown" mat-mini-fab color="primary" class="ms-2" matTooltip="Ver tiempo en {{selectedTown}}"
            [routerLink]="['/weather', selectedTown ]">
            <mat-icon>cloud</mat-icon>
          </button>
        </div>
        <div>
          <button mat-icon-button (click)="zoomOut()" matTooltip="Alejar">
            <mat-icon>remove</mat-icon>
          </button>
          <span class="mx-2">Zoom: {{ zoom | number: '1.1-1' }}</span>
          <button mat-icon-button (click)="zoomIn()" matTooltip="Acercar">
            <mat-icon>add</mat-icon>
          </button>
        </div>
      </div>
    </mat-card-actions>
  </mat-card>

  <div class="mt-3">
    <mat-card>
      <mat-card-content>
        <p><strong>Instrucciones:</strong></p>
        <ul>
          <li>Selecciona una comunidad autónoma, provincia o municipio en los desplegables para ver su ubicación en el mapa.</li>
          <li>Arrastra el marcador rojo para encontrar la ubicación más cercana.</li>
          <li>Haz clic en cualquier parte del mapa para mover el marcador a ese punto.</li>
          <li>Si seleccionas un municipio, puedes ver el tiempo actual haciendo clic en el botón de la nube.</li>
        </ul>
      </mat-card-content>
    </mat-card>
  </div>
</div>
